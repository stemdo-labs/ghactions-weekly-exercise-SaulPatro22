name: Get package version from package.json
on: [workflow_call]

outputs:
  version:
    description: 'Version from package.json'
    value: ${{ steps.get_version.outputs.version }}

jobs:
  get_version:
    runs-on: [self-hosted, labs-runner]

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Get version from package.json
        id: get_version
        run: echo "version=$(sed -n 's/.*"version": *"\([^"]*\)".*/\1/p' package.json)" >> $GITHUB_OUTPUT